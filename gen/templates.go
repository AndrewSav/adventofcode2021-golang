package main

type runDataElement struct {
	Day   int
	Parts []int
}

type runData struct {
	Days       []runDataElement
	LatestDay  int
	LatestPart int
}

const (
	runTemplate = `// Code generated by 'go run ./gen'; DO NOT EDIT
package main

import (
{{- range $d := .Days }}
	"aoc2021/day{{ printf "%02d" $d.Day }}"
{{- end }}
	"aoc2021/util"
	"log"
)

func run(day, part int, inputFile string) (string, int, int) {
	switch day {
{{- range $d := .Days }}
	case {{ $d.Day }}:
		switch part {
{{- range $p := $d.Parts }}
		case {{ $p }}:
			return day{{ printf "%02d" $d.Day }}.Part{{ $p }}(inputFile), day, part
{{- end}}
		default:
			log.Fatalf("Unknown part %d on day %d", part, day)
		}
{{- end}}
	default:
		log.Fatalf("Unknown  day %d", day)
	}
	panic("unexpected code path")
}

func getRunAll() (result []func() (string, int, int)) {
{{- range $d := .Days }}
{{- range $p := $d.Parts }}
	result = append(result, func() (string, int, int) { return run({{ $d.Day }}, {{ $p }}, util.GetDefautInputFilePath({{ $d.Day }})) })
{{- end }}
{{- end }}
	return
}

func getLatest() (day int, part int) {
	day = {{ .LatestDay }}
	part = {{ .LatestPart }}
	return
}
`
)
